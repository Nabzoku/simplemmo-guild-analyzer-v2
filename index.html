<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>SimpleMMO Guild Analyzer</title><link href="https://fonts.googleapis.com/css2?family=Bangers&display=swap" rel="stylesheet"><style>:root{--bg1:#0b0b0b;--card-bg:rgba(20,0,0,.85);--accent:#ffa200;--accent-strong:#e60000;--muted:#c7b089;--text:#fff3db;--glass-border:rgba(255,255,255,.06);--accent-link:#ffa200}html,body{min-height:100%;margin:0;background:linear-gradient(180deg,#050608 0%,#0b0b0b 100%);background-repeat:no-repeat;background-size:cover;font-family:'Bangers',"Segoe UI",Roboto,Arial,sans-serif;color:var(--text);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.container{width:100%;max-width:1100px;margin:28px auto;padding:20px;box-sizing:border-box}header{display:flex;flex-direction:column;align-items:center;gap:14px;margin-bottom:18px}h1{margin:0;font-size:30px;letter-spacing:1px;color:var(--accent);text-shadow:0 0 10px rgba(255,162,0,.12),1px 1px 0 rgba(0,0,0,.6)}.controls{width:100%;max-width:1000px;background:var(--card-bg);border-radius:12px;padding:14px;box-shadow:0 8px 18px rgba(0,0,0,.6);border:1px solid var(--glass-border);display:flex;flex-direction:column;align-items:center;box-sizing:border-box}.inputBox{width:100%;max-width:1000px;display:flex;flex-direction:column;gap:8px;align-items:center;box-sizing:border-box}label{align-self:flex-start;margin-left:6px;font-size:14px;color:var(--muted);text-transform:none;font-family:"Segoe UI",Roboto,Arial,sans-serif}input[type="text"],input[type="number"]{width:100%;max-width:980px;padding:10px 12px;border-radius:10px;border:3px solid var(--accent);background:#1a0000;color:var(--accent);font-family:"Segoe UI",Roboto,Arial,sans-serif;font-size:15px;text-align:center;box-sizing:border-box;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}input:focus{white-space:normal;overflow-x:auto;text-overflow:clip}button{margin-top:8px;width:240px;max-width:100%;padding:12px 16px;border-radius:10px;border:3px solid var(--accent);background:linear-gradient(90deg,var(--accent),var(--accent-strong));color:black;font-size:18px;cursor:pointer;font-family:'Bangers',"Segoe UI",Roboto,Arial,sans-serif;box-shadow:0 8px 18px rgba(166,85,247,.12)}button:disabled{opacity:.6;cursor:default;transform:none}#status{margin-top:10px;font-size:14px;color:var(--muted)}.results{margin-top:18px;display:flex;flex-direction:column;gap:12px;align-items:stretch}.tables-row{display:flex;gap:12px;flex-wrap:wrap;align-items:flex-start;justify-content:space-between}.table-box{flex:1 1 48%;min-width:320px;max-width:100%}.table-title{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px;color:var(--muted);font-size:14px}.table-title .count{font-weight:700;color:var(--text)}table{width:100%;border-collapse:collapse;table-layout:fixed;background:rgba(255,255,255,.02);border-radius:8px;overflow:hidden}thead th{text-align:left;font-size:13px;padding:10px 12px;background:rgba(255,255,255,.03);color:var(--muted);border-bottom:1px solid rgba(255,255,255,.04)}tbody td{padding:10px 12px;font-size:13px;color:var(--text);border-bottom:1px dashed rgba(255,255,255,.03);overflow-wrap:break-word;word-break:break-word;text-overflow:ellipsis;white-space:normal}tbody tr:nth-child(even){background:rgba(255,255,255,.01)}thead th:nth-child(1),tbody td:nth-child(1){width:40%;max-width:420px}thead th:nth-child(2),tbody td:nth-child(2){width:18%;max-width:120px}thead th:nth-child(3),tbody td:nth-child(3){width:18%;max-width:140px;text-align:center}thead th:nth-child(4),tbody td:nth-child(4){width:24%;max-width:180px;text-align:center}a.profile{color:var(--accent-link);text-decoration:none;font-weight:600}a.profile:hover{color:var(--accent-strong);text-decoration:underline}.panel{background:var(--card-bg);border-radius:10px;border:1px solid var(--glass-border);padding:10px;box-sizing:border-box}@media(max-width:880px){.tables-row{flex-direction:column}.table-box{flex-basis:100%}input[type="text"],input[type="number"]{max-width:100%}}</style></head><body><div class="container"><header><h1>SimpleMMO Guild Analyzer</h1><div class="controls"><div class="inputBox"><label for="apiKey">API Key</label><input id="apiKey" type="text" placeholder="Enter API key"><label for="guildId">Guild ID</label><input id="guildId" type="number" placeholder="e.g. 3212"><button id="runBtn" onclick="run()">ANALYZE</button></div><div id="status">Enter API key and Guild ID, then click ANALYZE.</div></div></header><main class="results" id="results"></main></div><script>async function p(u,b){const r=await fetch(u,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(b)});const t=await r.text();if(!r.ok)throw new Error(t||`HTTP ${r.status}`);try{return JSON.parse(t)}catch(e){throw new Error('Invalid JSON')}}function s(v){if(v==null)return 0;const n=Number(String(v).replace(/,/g,'').trim());return Number.isNaN(n)?0:n}function e(s){if(s==null)return'';return String(s).replace(/[&<>"']/g,m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]))}function c(d){d.innerHTML='';const a=["Members > 25k","Members < 25k","Non-Members > 25k","Non-Members < 25k"],w=document.createElement('div');w.className='tables-row';const r={};for(const t of a){const b=document.createElement('div');b.className='table-box';const x=document.createElement('div');x.className='table-title';x.innerHTML=`<span>${t}</span><span class="count">0</span>`;const p=document.createElement('div');p.className='panel';const l=document.createElement('table');l.innerHTML=`<thead><tr><th>Name</th><th>Level</th><th>Steps</th><th>Profile</th></tr></thead><tbody></tbody>`;p.appendChild(l);b.appendChild(x);b.appendChild(p);w.appendChild(b);r[t]={tbody:l.querySelector('tbody'),countEl:x.querySelector('.count')}}d.appendChild(w);return r}function a(r,p){const t=document.createElement('tr'),n=e(p.name);t.innerHTML=`<td title="${n}">${n}</td><td>${p.level}</td><td style="text-align:center">${p.steps}</td><td style="text-align:center"><a class="profile" href="https://web.simple-mmo.com/user/view/${p.user_id}" target="_blank" rel="noopener noreferrer">${p.user_id}</a></td>`;r.tbody.appendChild(t);r.countEl.textContent=r.tbody.children.length}async function run(){const k=document.getElementById('apiKey'),g=document.getElementById('guildId'),S=document.getElementById('status'),R=document.getElementById('results'),b=document.getElementById('runBtn'),K=k.value.trim(),G=g.value.trim();if(!K||!G){alert('Enter API key & Guild ID');return}b.disabled=!0;S.textContent='Fetching guild members...';const T=c(R);let M;try{M=await p(`https://api.simple-mmo.com/v1/guilds/members/${G}`,{api_key:K})}catch(e){S.innerHTML=`<span style="color:#ff6b6b">Error fetching guild members: ${e.message||e}</span>`;b.disabled=!1;return}if(!Array.isArray(M)||M.length===0){S.textContent='No members returned (check API key / guild id).';b.disabled=!1;return}for(let i=0;i<M.length;i++){const m=M[i];S.textContent=`Processing ${i+1}/${M.length}: ${m.name??m.user_id??'player'}`;let f;try{f=await p(`https://api.simple-mmo.com/v1/player/info/${m.user_id}`,{api_key:K})}catch(err){a(T['Non-Members < 25k'],{name:`Error ${m.user_id}`,level:0,steps:'?',user_id:m.user_id});await new Promise(r=>setTimeout(r,1600));continue}const l=s(f.level),S=f.steps===undefined||f.steps===null?'?':f.steps,isMem=Number(f.membership)===1,c=isMem?(l>25000?'Members > 25k':'Members < 25k'):(l>25000?'Non-Members > 25k':'Non-Members < 25k');a(T[c],{name:f.name||m.name||'?',level:l,steps:S,user_id:f.user_id??f.id??m.user_id});await new Promise(r=>setTimeout(r,1600))}S.textContent='✅ Done — all members processed.';b.disabled=!1}</script></body></html>
