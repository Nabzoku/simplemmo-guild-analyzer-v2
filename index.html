<!DOCTYPE html><html lang="en"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" /><title>SimpleMMO Guild Analyzer</title><link href="https://fonts.googleapis.com/css2?family=Bangers&display=swap" rel="stylesheet"><style> :root{ --bg1:#0b0b0b; --card-bg: rgba(20, 0, 0, 0.85); --accent:#ffa200; --accent-strong:#e60000; --muted:#c7b089; --text:#fff3db; --glass-border: rgba(255,255,255,0.06); --accent-link:#ffa200; } html, body { min-height: 100%; margin: 0; background: linear-gradient(180deg, #050608 0%, #0b0b0b 100%); background-repeat: no-repeat; background-size: cover; font-family: 'Bangers', "Segoe UI", Roboto, Arial, sans-serif; color: var(--text); -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; } .container { width: 100%; max-width: 1100px; margin: 28px auto; padding: 20px; box-sizing: border-box; } header { display: flex; flex-direction: column; align-items: center; gap: 14px; margin-bottom: 18px; } h1 { margin: 0; font-size: 30px; letter-spacing: 1px; color: var(--accent); text-shadow: 0 0 10px rgba(255,162,0,0.12), 1px 1px 0 rgba(0,0,0,0.6); } .controls { width: 100%; max-width: 1000px; background: var(--card-bg); border-radius: 12px; padding: 14px; box-shadow: 0 8px 18px rgba(0,0,0,0.6); border: 1px solid var(--glass-border); display: flex; flex-direction: column; align-items: center; box-sizing: border-box; } .inputBox { width: 100%; max-width: 1000px; display: flex; flex-direction: column; gap: 8px; align-items: center; box-sizing: border-box; } label { align-self: flex-start; margin-left: 6px; font-size: 14px; color: var(--muted); } input[type="text"], input[type="number"] { width: 100%; max-width: 980px; padding: 10px 12px; border-radius: 10px; border: 3px solid var(--accent); background: #1a0000; color: var(--accent); font-family: "Segoe UI", Roboto, Arial, sans-serif; font-size: 15px; text-align: center; box-sizing: border-box; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; } input:focus { white-space: normal; overflow-x: auto; text-overflow: clip; } button { margin-top: 8px; width: 240px; max-width: 100%; padding: 12px 16px; border-radius: 10px; border: 3px solid var(--accent); background: linear-gradient(90deg, var(--accent), var(--accent-strong)); color: black; font-size: 18px; cursor: pointer; font-family: 'Bangers', "Segoe UI", Roboto, Arial, sans-serif; box-shadow: 0 8px 18px rgba(166,85,247,0.12); } button:disabled { opacity: 0.6; cursor: default; transform: none; } #status { margin-top: 10px; font-size: 14px; color: var(--muted); } .results { margin-top: 18px; display: flex; flex-direction: column; gap: 12px; align-items: stretch; } .tables-row { display: flex; gap: 12px; flex-wrap: wrap; align-items: flex-start; justify-content: space-between; } .table-box { flex: 1 1 48%; min-width: 320px; max-width: 100%; } .table-title { display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px; color: var(--muted); font-size: 14px; } .table-title .count { font-weight: 700; color: var(--text); } table { width: 100%; border-collapse: collapse; table-layout: fixed; background: rgba(255,255,255,0.02); border-radius: 8px; overflow: hidden; } thead th { text-align: left; font-size: 13px; padding: 10px 12px; background: rgba(255,255,255,0.03); color: var(--muted); border-bottom: 1px solid rgba(255,255,255,0.04); } tbody td { padding: 10px 12px; font-size: 13px; color: var(--text); border-bottom: 1px dashed rgba(255,255,255,0.03); overflow-wrap: break-word; word-break: break-word; text-overflow: ellipsis; white-space: normal; } tbody tr:nth-child(even){ background: rgba(255,255,255,0.01); } thead th:nth-child(1), tbody td:nth-child(1) { width: 30%; max-width: 420px; } thead th:nth-child(2), tbody td:nth-child(2) { width: 12%; max-width: 80px; } thead th:nth-child(3), tbody td:nth-child(3) { width: 12%; max-width: 80px; text-align:center; } thead th:nth-child(4), tbody td:nth-child(4) { width: 24%; max-width: 140px; text-align:center; } thead th:nth-child(5), tbody td:nth-child(5) { width: 22%; max-width: 180px; text-align:center; } a.profile { color: var(--accent-link); text-decoration: none; font-weight: 600; } a.profile:hover { color: var(--accent-strong); text-decoration: underline; } .panel { background: var(--card-bg); border-radius: 10px; border: 1px solid var(--glass-border); padding: 10px; box-sizing: border-box; } @media (max-width: 880px) { .tables-row { flex-direction: column; } .table-box { flex-basis: 100%; } input[type="text"], input[type="number"] { max-width: 100%; } } </style></head><body><div class="container"><header><h1>SimpleMMO Guild Analyzer</h1><div class="controls"><div class="inputBox"><label for="apiKey">API Key</label><input id="apiKey" type="text" placeholder="Enter API key"><label for="guildId">Guild ID</label><input id="guildId" type="number" placeholder="e.g. 3212"><button id="runBtn" onclick="run()">ANALYZE</button></div><div id="status">Enter API key and Guild ID, then click ANALYZE.</div></div></header><main class="results" id="results"></main></div><script> function postJSON(url, body) { return fetch(url, { method: 'POST', headers: {'Content-Type':'application/json'}, body: JSON.stringify(body) }).then(res => res.text()).then(txt => { if (!txt) throw new Error('No response'); try { return JSON.parse(txt); } catch(e) { throw new Error('Invalid JSON'); } }); } function sanitizeLevel(v) { if (v == null) return 0; const n = Number(String(v).replace(/,/g,'').trim()); return Number.isNaN(n) ? 0 : n; } function escapeHtml(s) { if (s == null) return ''; return String(s).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])); } function timeAgo(ts) { if (!ts) return '?'; const now = Date.now(); const diff = now - ts*1000; const seconds = Math.floor(diff / 1000); if (seconds < 60) return `${seconds} second${seconds!==1?'s':''} ago`; const minutes = Math.floor(seconds/60); if (minutes < 60) return `${minutes} minute${minutes!==1?'s':''} ago`; const hours = Math.floor(minutes/60); if (hours < 24) return `${hours} hour${hours!==1?'s':''} ago`; const days = Math.floor(hours/24); return `${days} day${days!==1?'s':''} ago`; } function createTables(container) { container.innerHTML = ''; const cats = ["Members > 25k","Members < 25k","Non-Members > 25k","Non-Members < 25k"]; const wrapper = document.createElement('div'); wrapper.className = 'tables-row'; const refs = {}; for (const c of cats) { const box = document.createElement('div'); box.className = 'table-box'; const title = document.createElement('div'); title.className = 'table-title'; title.innerHTML = `<span>${c}</span><span class="count">0</span>`; const panel = document.createElement('div'); panel.className = 'panel'; const table = document.createElement('table'); table.innerHTML = `<thead><tr><th>Name</th><th>Level</th><th>Steps</th><th>Last Activity</th><th>Profile</th></tr></thead><tbody></tbody>`; panel.appendChild(table); box.appendChild(title); box.appendChild(panel); wrapper.appendChild(box); refs[c] = { tbody: table.querySelector('tbody'), countEl: title.querySelector('.count') }; } container.appendChild(wrapper); return refs; } function addRow(ref, p) { const tr = document.createElement('tr'); const safeName = escapeHtml(p.name); tr.innerHTML = ` <td title="${safeName}">${safeName}</td><td>${p.level}</td><td style="text-align:center">${p.steps}</td><td style="text-align:center">${timeAgo(p.last_activity)}</td><td style="text-align:center"><a class="profile" href="https://web.simple-mmo.com/user/view/${p.user_id}" target="_blank" rel="noopener noreferrer">${p.user_id}</a></td> `; ref.tbody.appendChild(tr); ref.countEl.textContent = ref.tbody.children.length; } async function run() { const apiKey = document.getElementById('apiKey').value.trim(); const guildId = document.getElementById('guildId').value.trim(); const statusEl = document.getElementById('status'); const resultsEl = document.getElementById('results'); const runBtn = document.getElementById('runBtn'); if (!apiKey || !guildId) { alert('Enter API key & Guild ID'); return; } runBtn.disabled = true; statusEl.textContent = 'Fetching guild members...'; const refs = createTables(resultsEl); let guildMembers; try { guildMembers = await postJSON(`https://api.simple-mmo.com/v1/guilds/members/${guildId}`, { api_key: apiKey }); } catch (err) { statusEl.innerHTML = `<span style="color:#ff6b6b">Error fetching guild members: ${err.message || err}</span>`; runBtn.disabled = false; return; } if (!Array.isArray(guildMembers) || guildMembers.length === 0) { statusEl.textContent = 'No members returned (check API key / guild id).'; runBtn.disabled = false; return; } for (let i=0;i<guildMembers.length;i++) { const gm = guildMembers[i]; statusEl.textContent = `Processing ${i+1}/${guildMembers.length}: ${gm.name ?? gm.user_id ?? 'player'}`; let playerInfo; try { playerInfo = await postJSON(`https://api.simple-mmo.com/v1/player/info/${gm.user_id}`, { api_key: apiKey }); } catch (err) { addRow(refs['Non-Members < 25k'], { name: `Error ${gm.user_id}`, level:0, steps:'?', last_activity:0, user_id:gm.user_id }); await new Promise(r=>setTimeout(r,1600)); continue; } const lvl = sanitizeLevel(playerInfo.level); const steps = playerInfo.steps ?? '?'; const isMember = Number(playerInfo.membership) === 1; const category = isMember ? (lvl>25000 ? 'Members > 25k' : 'Members < 25k') : (lvl>25000 ? 'Non-Members > 25k' : 'Non-Members < 25k'); addRow(refs[category], { name: playerInfo.name || gm.name || '?', level: lvl, steps: steps, last_activity: playerInfo.last_activity, user_id: playerInfo.user_id ?? gm.user_id }); await new Promise(r=>setTimeout(r,1600)); } statusEl.textContent = '✅ Done — all members processed.'; runBtn.disabled = false; } </script></body></html> 
